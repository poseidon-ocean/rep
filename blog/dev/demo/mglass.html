<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>累土 - 合抱之木，生于毫末；九层之台，起于累土</title>
	<meta name="keywords" content="个人博客,SEO优化,编程开发,大数据,网站建设,学习交流"/>
	<meta name="description" content="码一码互联网的一些事儿,让高大上走入寻常百姓家"/>
	<link rel="shortcut icon" type="image/ico" href="../../images/favicon.ico">
	
	<style type="text/css">
		*{margin:0;padding:0;}
		body{font-size:16px;font-family:"微软雅黑";color:#666;
			background:#fff;
		}
		.magnify{width:200px;margin:50px auto;position:relative;}
		.large{width:175px;height:175px;
			position:absolute;
			border-radius:100%;
			box-shadow:0 0 0 7px rgba(255,255,255,0.85),
				0 0 7px 7px rgba(0,0,0,0.25),
				inset 0 0 40px 2px rgba(0,0,0,0.25);
			background:url("images/iphone.jpg") no-repeat;
			display:none;
		}
		.small{display:block;}
	</style>
</head>
<body>
	
	<div class="magnify">
		<div class="large"></div>
		<img class="small" src="images/iphone.jpg" width="200" />
	</div>
	
	
	<script type="text/javascript">
		window.onload = function(){
			var larDom = document.getElementsByClassName("large")[0];
			var imgDom = document.getElementsByClassName("small")[0];
			
			document.getElementsByClassName("magnify")[0].onmousemove 
				= function(e){
					var ev = e || window.event;
					var mx = ev.clientX - this.offsetLeft;
					var my = ev.clientY - this.offsetTop;
					
					//判断放大镜是否已经和图片接触到了
					if(mx < this.clientWidth && my <this.clientHeight && mx > 0 && my>0){
						larDom["style"]["display"] = "block";
					}else{
						larDom["style"]["display"] = "none";
					}
					
					//放大镜的位置
					var left = mx - larDom.clientWidth/2;
					var top = my - larDom.clientHeight/2;
					
					//图片的坐标位置的换算 
					var img = new Image();
					img.src = imgDom.src;
					var iw = img.width;
					var ih = img.height;
					//计算出当前鼠标所在图片的位置的比例
					var bx = (mx / imgDom.clientWidth*iw - larDom.clientWidth/2)*-1 + "px";
					var by = (my / imgDom.clientHeight*ih - larDom.clientHeight/2)*-1 + "px";
					
					larDom["style"]["left"] = left + "px";
					larDom["style"]["top"] = top + "px";
					larDom["style"]["background-position"] = bx + " " +by;
				}
		}
	
	</script>
</body>
</html>